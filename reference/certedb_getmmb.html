<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>MMB-gegevens ophalen van MySQL-/MariaDB-database — certedb_getmmb • certedb</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="MMB-gegevens ophalen van MySQL-/MariaDB-database — certedb_getmmb" />
<meta property="og:description" content="Gegevens van Certe Medische Microbiologie uit de Certe-database downloaden. De benodigde tabellen worden als LEFT JOIN automatisch toegevoegd op basis van de input bij where en select. Nadien kan met qry de query bekeken worden, die als eigenschap bij het object opgeslagen wordt.
certedb_getmmb haalt orders en resultaten op, met uitslagen. 
certedb_getmmb_tat haalt van deze orders de doorlooptijden op (TAT = Turn Around Time)." />
<meta property="og:image" content="https://certe-medical-epidemiology.github.io/certedb/logo.svg" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">certedb</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book-open"></span>
     
    Manual
  </a>
</li>
<li>
  <a href="https://github.com/certe-medical-epidemiology/certedb">
    <span class="fab fa-github"></span>
     
    Source Code
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://certe.nl">
    <span class="fa fa-flask"></span>
     
    Certe Website
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>MMB-gegevens ophalen van MySQL-/MariaDB-database</h1>
    <small class="dont-index">Source: <a href='https://github.com/certe-medical-epidemiology/certedb/blob/master/R/get_mmb.R'><code>R/get_mmb.R</code></a></small>
    <div class="hidden name"><code>certedb_getmmb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Gegevens van Certe Medische Microbiologie uit de Certe-database downloaden. De benodigde tabellen worden als <code>LEFT JOIN</code> automatisch toegevoegd op basis van de input bij <code>where</code> en <code>select</code>. Nadien kan met <code><a href='qry.html'>qry</a></code> de query bekeken worden, die als eigenschap bij het object opgeslagen wordt.</p>
<p><code>certedb_getmmb</code> haalt orders en resultaten op, met uitslagen. <br />
<code>certedb_getmmb_tat</code> haalt van deze orders de doorlooptijden op (TAT = Turn Around Time).</p>
    </div>

    <pre class="usage"><span class='fu'>certedb_getmmb</span><span class='op'>(</span>
  dates <span class='op'>=</span> <span class='cn'>NULL</span>,
  where <span class='op'>=</span> <span class='cn'>NULL</span>,
  select_preset <span class='op'>=</span> <span class='st'>"mmb"</span>,
  preset <span class='op'>=</span> <span class='st'>"mmb"</span>,
  select <span class='op'>=</span> <span class='cn'>NULL</span>,
  add_cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  limit <span class='op'>=</span> <span class='fl'>1e+07</span>,
  con <span class='op'>=</span> <span class='cn'>NULL</span>,
  dbname <span class='op'>=</span> <span class='st'>"certemmb"</span>,
  info <span class='op'>=</span> <span class='cn'>TRUE</span>,
  first_isolates <span class='op'>=</span> <span class='cn'>FALSE</span>,
  eucast_rules <span class='op'>=</span> <span class='st'>"all"</span>,
  MIC <span class='op'>=</span> <span class='cn'>FALSE</span>,
  zipcodes <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ziplength <span class='op'>=</span> <span class='fl'>4</span>,
  inhabitants <span class='op'>=</span> <span class='cn'>FALSE</span>,
  tat_hours <span class='op'>=</span> <span class='cn'>FALSE</span>,
  only_real_patients <span class='op'>=</span> <span class='cn'>TRUE</span>,
  only_conducted_tests <span class='op'>=</span> <span class='cn'>TRUE</span>,
  only_validated <span class='op'>=</span> <span class='cn'>FALSE</span>,
  only_show_query <span class='op'>=</span> <span class='cn'>FALSE</span>,
  review_where <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>min</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"review_where"</span>, <span class='cn'>TRUE</span><span class='op'>)</span>, <span class='va'>info</span>,
    <span class='fu'><a href='https://rdrr.io/r/base/interactive.html'>interactive</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
  unselect_all_same <span class='op'>=</span> <span class='cn'>FALSE</span>,
  unselect_all_empty <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>certedb_getmmb_tat</span><span class='op'>(</span>
  dates <span class='op'>=</span> <span class='cn'>NULL</span>,
  where <span class='op'>=</span> <span class='cn'>NULL</span>,
  add_cols <span class='op'>=</span> <span class='cn'>NULL</span>,
  limit <span class='op'>=</span> <span class='fl'>1e+07</span>,
  con <span class='op'>=</span> <span class='cn'>NULL</span>,
  dbname <span class='op'>=</span> <span class='st'>"certemmb"</span>,
  info <span class='op'>=</span> <span class='cn'>TRUE</span>,
  only_real_patients <span class='op'>=</span> <span class='cn'>TRUE</span>,
  only_conducted_tests <span class='op'>=</span> <span class='cn'>TRUE</span>,
  only_validated <span class='op'>=</span> <span class='cn'>TRUE</span>,
  only_show_query <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dates</th>
      <td><p>Standaard is dit hele jaar. Geldige opties zijn: leeg (selecteert dit hele jaar) of een vector met 2 datums (bestaande uit oudste en nieuwste datum) of een enkele datum (einddatum wordt laatste dag van dat jaar).</p></td>
    </tr>
    <tr>
      <th>where</th>
      <td><p>Standaard is leeg. Syntax om toe te voegen aan de WHERE-clausule. <br /> <br />
R-syntax wordt omgezet naar SQL-syntax, zie Examples. Deze syntax wordt geëvalueerd, dus gebruik van variabelen is ook mogelijk, zoals <code>certedb_getmmb(where = where(o.jaar == mijnjaar))</code>. <br /> <br />
<strong>NB.</strong> Wanneer tabelvelden in meerdere brontabellen voorkomen, moet de tabelreferentie opgegeven worden. Zie Details voor de tabelreferenties en Examples voor voorbeelden.</p></td>
    </tr>
    <tr>
      <th>select_preset, preset</th>
      <td><p>Standaard is <code>"mmb"</code> of <code>"tat"</code> bij doorlooptijden. Variabelen om te selecteren volgens de voorgedefinieerde lijst met variabelen, zie <code><a href='preset.html'>preset.list</a></code>. Kan ook een vector met meerdere presets zijn. Voor het selecteren van de eerste preset uit de huidige map (bestandsnaam moet beginnen met <code>"preset"</code>), gebruik <code>select_preset = <a href='preset.html'>preset.thisfolder</a>()</code>.</p></td>
    </tr>
    <tr>
      <th>select</th>
      <td><p>Standaard is leeg. Variabelen om <strong>handmatig</strong> te selecteren. Deze kunnen het best geselecteerd worden met <code>db</code> en dit overschrijft <code>select_preset</code>.</p></td>
    </tr>
    <tr>
      <th>add_cols</th>
      <td><p>Standaard is leeg. Variabelen in een vector of <code>list</code> om <strong>extra</strong> te selecteren. Deze kunnen het best geselecteerd worden met <code>db</code>. Gebruik <code>add_cols = c("naam" = db$t.kolom)</code> voor <code>"t.kolom AS naam"</code>.</p></td>
    </tr>
    <tr>
      <th>limit</th>
      <td><p>Standaard is 10.000.000. Het aantal rijen dat maximaal opgehaald moet worden.</p></td>
    </tr>
    <tr>
      <th>con</th>
      <td><p>Standaard is leeg, waarmee de verbinding gemaakt wordt op basis van de omgevingsvariabelen van de huidige gebruiker: <code>"DB_HOST"</code>, <code>"DB_PORT"</code>, <code>"DB_USERNAME"</code> en <code>"DB_PASSWORD"</code>.</p></td>
    </tr>
    <tr>
      <th>dbname</th>
      <td><p>Standaard is <code>"certemmb"</code>. Naam van de database die geselecteerd moet worden. Wordt genegeerd als <code>con</code> al een bestaande verbinding is.</p></td>
    </tr>
    <tr>
      <th>info</th>
      <td><p>Standaard is <code>TRUE</code>. Printen van voortgang en het uiteindelijke aantal rijen en kolommen dat gedownload is.</p></td>
    </tr>
    <tr>
      <th>first_isolates</th>
      <td><p>Standaard is <code>FALSE</code>. Bepaling van eerste isolaten toevoegen.</p></td>
    </tr>
    <tr>
      <th>eucast_rules</th>
      <td><p>Standaard is <code>"all"</code>. EUCAST expert rules toepassen, zie <code>eucast_rules</code>.</p></td>
    </tr>
    <tr>
      <th>MIC</th>
      <td><p>Standaard is <code>FALSE</code>. Toevoegen van MIC's aan alle RSI-kolommen van de de standaard query (i.e. zonder dat <code>select</code> gebruikt wordt).</p></td>
    </tr>
    <tr>
      <th>zipcodes</th>
      <td><p>Standaard is <code>FALSE</code>. Toevoegen van postcodes van de patiënt, als <code>p.postcode</code>. Met name voor gebruik met <code>get_map</code> en <code>plot2.map</code>.</p></td>
    </tr>
    <tr>
      <th>ziplength</th>
      <td><p>Standaard is <code>4</code>. De gewenste lengte van de postcode.</p></td>
    </tr>
    <tr>
      <th>inhabitants</th>
      <td><p>Standaard is <code>FALSE</code>, maar alleen zinvol als <code>zipcodes = TRUE</code>. Voegt automatisch de data van CBS toe, die opgeslagen liggen in de tabel <code>temporary_certemm_cbs</code>, op basis van de postcodelengte die opgegeven is met <code>ziplength</code>.</p></td>
    </tr>
    <tr>
      <th>tat_hours</th>
      <td><p>Standaard is <code>TRUE</code>. Turn-around-times toevoegen in uren <em>(alleen voor doorlooptijden)</em>.</p></td>
    </tr>
    <tr>
      <th>only_real_patients</th>
      <td><p>Standaard is <code>TRUE</code>. Hiermee worden alleen daadwerkelijke patiënten gedownload (geen rondzendingen en testorders). Dit voegt automatisch <code>AND u.is_echte_patient = TRUE</code> toe aan de <code>WHERE</code>.</p></td>
    </tr>
    <tr>
      <th>only_conducted_tests</th>
      <td><p>Standaard is <code>TRUE</code>. Hiermee worden alleen verrichte testen gedownload (geen testen die niet verricht zijn). Dit voegt automatisch <code>AND u.is_verricht = TRUE</code> toe aan de <code>WHERE</code>.</p></td>
    </tr>
    <tr>
      <th>only_validated</th>
      <td><p>Standaard is <code>FALSE</code> bij <code>certedb_getmmb()</code> en <code>TRUE</code> bij <code>certedb_getmmb_tat()</code>. Hiermee worden alleen geautoriseerde uitslagen gedownload. Dit voegt automatisch <code>AND u.uitslag_int &lt;&gt; '(in behandeling)'</code> toe aan de <code>WHERE</code>.</p></td>
    </tr>
    <tr>
      <th>only_show_query</th>
      <td><p>Standaard is <code>FALSE</code>. Draait de query niet, maar toont hem alleen.</p></td>
    </tr>
    <tr>
      <th>review_where</th>
      <td><p>Standaard is <code>FALSE</code> als <code>info = FALSE</code> of de sessie in niet-interactief (RMarkdown). Bij een interactieve sessie (d.w.z. niet in RMarkdown) wordt de WHERE weergegeven die de gebruiker moet accorderen. Dit kan standaard op <code>FALSE</code> gezet worden met <code><a href='https://rdrr.io/r/base/options.html'>getOption</a>("review_where")</code>.</p></td>
    </tr>
    <tr>
      <th>unselect_all_same</th>
      <td><p>Standaard is <code>FALSE</code>. Kolommen excluderen die maar 1 unieke waarde bevatten met <code>select(!all_same())</code>.</p></td>
    </tr>
    <tr>
      <th>unselect_all_empty</th>
      <td><p>Standaard is <code>FALSE</code>. Kolommen excluderen die helemaal leeg zijn met <code>select(!all_empty())</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Overige parameters die doorgegeven worden aan <code><a href='certedb_query.html'>certedb_query</a></code>, zoals <code>auto_transform</code> en <code>timezone</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Voor gebruik van <code>where</code> staan hieronder de tabelreferenties. Deze zijn ook beschikbaar via de <em>list</em> <code>db</code>:</p><ul>
<li><p><strong><code>a</code></strong> <br /> <code>temporary_certemm_aanvragers_praktijken</code></p></li>
<li><p><strong><code>aanvr</code></strong> <br /> <code>temporary_certemm_aanvragers_praktijken</code></p></li>
<li><p><strong><code>beh</code></strong> <br /> <code>temporary_certemm_aanvragers_praktijken</code></p></li>
<li><p><strong><code>b</code></strong> <br /> <code>temporary_certemm_bacterienlijst</code></p></li>
<li><p><strong><code>cbs</code></strong> <br /> <code>temporary_certemm_cbs</code> (joint aan <code>certemm_pat.postcode</code>)</p></li>
<li><p><strong><code>d</code></strong> <br /> <code>temporary_certemm_aanmaakdatums</code></p></li>
<li><p><strong><code>dlt</code></strong> <em>(alleen voor doorlooptijden)</em> <br /> <code>temporary_certemm_doorlooptijden</code></p></li>
<li><p><strong><code>i</code></strong> <br /> <code>temporary_certemm_isolaten_rsi</code></p></li>
<li><p><strong><code>i_mic</code></strong> <br /> <code>temporary_certemm_isolaten_mic</code></p></li>
<li><p><strong><code>l_instelling</code></strong> <br /> <code>temporary_certemm_locaties</code></p></li>
<li><p><strong><code>l_ontvangst</code></strong> <br /> <code>temporary_certemm_locaties</code></p></li>
<li><p><strong><code>l_uitvoer</code></strong> <br /> <code>temporary_certemm_locaties</code></p></li>
<li><p><strong><code>m</code></strong> <br /> <code>temporary_certemm_materiaalgroepen</code></p></li>
<li><p><strong><code>o</code></strong> <br /> <code>temporary_certemm_orders</code></p></li>
<li><p><strong><code>p</code></strong> <br /> <code>certemm_pat</code></p></li>
<li><p><strong><code>pat</code></strong> <br /> <code>temporary_certemm_patienten</code></p></li>
<li><p><strong><code>t</code></strong> <br /> <code>temporary_certemm_testgroepen</code></p></li>
<li><p><strong><code>u</code></strong> <br /> <code>temporary_certemm_uitslagen</code></p></li>
</ul>

<p>Locatie wordt dus op <strong>drie manieren gekoppeld</strong>; als <code>l_instelling</code> (op <code>o.instelling</code>, zoals huisarts), als <code>l_ontvangst</code> (op <code>o.recsitenb</code>, zoals Assen) en als <code>l_uitvoer</code> (op <code>u.uitvafd</code>, zoals Moleculair).</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='certedb_query.html'>certedb_query</a></code> voor het direct gebruik van query's.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matthijs S. Berends, Erwin E. A. Hassing, Erwin Dijkstra, Certe Medical Diagnostics & Advice Foundation.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


